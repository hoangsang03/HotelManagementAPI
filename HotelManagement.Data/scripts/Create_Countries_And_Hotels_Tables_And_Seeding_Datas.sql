CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);

START TRANSACTION;

CREATE TABLE "Countries" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" text NULL,
    "ShortName" text NULL,
    CONSTRAINT "PK_Countries" PRIMARY KEY ("Id")
);

CREATE TABLE "Hotels" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" text NULL,
    "Address" text NULL,
    "Rating" double precision NOT NULL,
    "CountryId" integer NOT NULL,
    CONSTRAINT "PK_Hotels" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Hotels_Countries_CountryId" FOREIGN KEY ("CountryId") REFERENCES "Countries" ("Id") ON DELETE CASCADE
);

CREATE INDEX "IX_Hotels_CountryId" ON "Hotels" ("CountryId");

INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231115170603_Add_Hotel_Country_Entities', '7.0.14');

COMMIT;

START TRANSACTION;

INSERT INTO "Countries" ("Id", "Name", "ShortName")
VALUES (1, 'New York City', 'NYC');
INSERT INTO "Countries" ("Id", "Name", "ShortName")
VALUES (2, 'Los Angeles', 'LA');
INSERT INTO "Countries" ("Id", "Name", "ShortName")
VALUES (3, 'Chicago', 'Chi-town');
INSERT INTO "Countries" ("Id", "Name", "ShortName")
VALUES (4, 'Houston', 'H-Town');
INSERT INTO "Countries" ("Id", "Name", "ShortName")
VALUES (5, 'Phoenix', 'PHX');
INSERT INTO "Countries" ("Id", "Name", "ShortName")
VALUES (6, 'Philadelphia', 'Philly');
INSERT INTO "Countries" ("Id", "Name", "ShortName")
VALUES (7, 'San Antonio', 'SA');
INSERT INTO "Countries" ("Id", "Name", "ShortName")
VALUES (8, 'San Diego', 'SD');
INSERT INTO "Countries" ("Id", "Name", "ShortName")
VALUES (9, 'Dallas', 'Big D');
INSERT INTO "Countries" ("Id", "Name", "ShortName")
VALUES (10, 'San Francisco', 'SF');

INSERT INTO "Hotels" ("Id", "Address", "CountryId", "Name", "Rating")
VALUES (1, 'Negril', 1, 'Sandals Resort and Spa', 4.5);
INSERT INTO "Hotels" ("Id", "Address", "CountryId", "Name", "Rating")
VALUES (2, 'George Town', 3, 'Comfort Suites', 4.2999999999999998);
INSERT INTO "Hotels" ("Id", "Address", "CountryId", "Name", "Rating")
VALUES (3, 'Nassau', 2, 'Grand Palladium', 4.0);
INSERT INTO "Hotels" ("Id", "Address", "CountryId", "Name", "Rating")
VALUES (4, 'New York City', 1, 'Marriott Downtown', 4.7999999999999998);
INSERT INTO "Hotels" ("Id", "Address", "CountryId", "Name", "Rating")
VALUES (5, 'Los Angeles', 4, 'Hollywood Luxury Inn', 4.2000000000000002);
INSERT INTO "Hotels" ("Id", "Address", "CountryId", "Name", "Rating")
VALUES (6, 'Chicago', 5, 'Windy City Suites', 4.4000000000000004);
INSERT INTO "Hotels" ("Id", "Address", "CountryId", "Name", "Rating")
VALUES (7, 'Houston', 6, 'Space City Hotel', 4.0999999999999996);
INSERT INTO "Hotels" ("Id", "Address", "CountryId", "Name", "Rating")
VALUES (8, 'Phoenix', 7, 'Desert Oasis Resort', 4.5999999999999996);
INSERT INTO "Hotels" ("Id", "Address", "CountryId", "Name", "Rating")
VALUES (9, 'Philadelphia', 8, 'Liberty Suites', 4.2999999999999998);
INSERT INTO "Hotels" ("Id", "Address", "CountryId", "Name", "Rating")
VALUES (10, 'San Antonio', 9, 'Alamo View Hotel', 4.5);

SELECT setval(
    pg_get_serial_sequence('"Countries"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "Countries") + 1,
        nextval(pg_get_serial_sequence('"Countries"', 'Id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('"Hotels"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "Hotels") + 1,
        nextval(pg_get_serial_sequence('"Hotels"', 'Id'))),
    false);

INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231121173321_SeededCountriesAndHotels', '7.0.14');

COMMIT;

